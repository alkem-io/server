language: node_js
node_js:
  - v12.18.3
cache:
  directories:
    - node_modules
env:
  matrix:
    - DATABASE_HOST=localhost MYSQL_DATABASE=cherrytwist MYSQL_ROOT_PASSWORD=toor AUTH_ENABLED=true LOGGING_CONSOLE_ENABLED=false
      AUTH_AAD_UPN_DOMAIN=devcherrytwist.onmicrosoft.com AUTH_AAD_CLIENT_APP_ID=6f4fcdb2-5792-4e17-bbdc-14ac0cf78496
      AUTH_AAD_CHERRYTWIST_API_SCOPE=api://869e0dc2-907e-45fe-841f-34cc93beee63/.default
      AUTH_AAD_TENANT=22e3aada-5a09-4e2b-9e0e-dc4f02328b29 AUTH_AAD_CHERRYTWIST_API_APP_ID=869e0dc2-907e-45fe-841f-34cc93beee63
      AUTH_AAD_MSGRAPH_API_SCOPE="Directory.AccessAsUser.All Directory.ReadWrite.All
      User.ReadWrite.All"
  global:
    - secure: NU51GYftTEV5M5fYS/CZKfE4awTgdzg1HyTHAe3zrXaEgp5O4ww5rSBu5wfPRRw+PMPAVgpNIxfnTOeGC767N7fTzlaXPw/vtSCab5nj6719nWJoWXjVBaH8fmCrjo2CNnRxcH8SIBCjUD9HhHoIewBNKB4U79+49vp0Q+8+y4Z9Yn2oQAu/sBU2KURRbTSWz5oVVwXP4YBhr0rtmrbpchpp8j1ECTlqaM8joMoKMVc7bxQiBXeBFNIfJvXAjJDap9FG1hA5qo9aUVTWPuZ6LeLEEBUyARLmmxOvsX26R8nAOXgNslKsx5FJr7Yle4M2RviQGMWzEfkdKQ4By8lECioXzenG2lsglnJmpwjA1trW+ZOhwJH++OhQB+VzlTJzlCeyDdpV8sOS2hSkZunJ6wY4/AmR0CPSAmv0mxGnKuth3jszG1qB3GjdeDxmPnltPo1mdBBaYIHbcJUDpjY8j1sT1dSJ3wGnTxgfbq361jVYyj/v/CEZV5s3FBeNpAbjQLMTY1CJoVLw2EkeHaBNw0034DJin0msAFR2tliy57m/Rs4jIgWe6XLJ4BbMw4kXvKcMBg9eLbo3/Onl1LiOBgTsjLRIxxve4FMdY2u2Bx7b6uZ4BO9dtlgXWgSD6ReREqNHSuXa8SmS4/se3jzNf1VJ2rK2xb1meD027sCbWMY=
    - secure: O2dViP+PO+RlzqnbZRPFYM/cI37Td7BykGKkfa4DFjf5SrQHUmA6yJMQiLb1BPTtbNzUND0YUuV/I6tH4J9kDXww92LbNkPSjep4xN9CXJp88EQLpumWryEJn1Bzv6savt9bkAdKyjHKLTGrsoPeuTTgiPxnnvaWQD5bON3DRip1T6irve/jzzGqo3Zl1Sr4lF0JpUy802jO+QOhDBq5spjk0nYzw3nncrzJ8ryl7zutTPxnCj2qk3/5zu9xwf7eATdgeiKNyb43jq6iD5NgIiP3YmYVueff8htd1+WhvuM25Tbbt4Sm1nX2aIKjIYoblcBlmbiRcvw1hjpZxqC7yFPgtpRWAqZ3vWizi018BkgCWV+2kMrWhwCSozhO3vD3G2TgFLqoM+OQqZqwx6FoLUkTzXj+ec23Hx9cTFF9kCoa0A8LQ+68baYZv26WyhOR1s7nndrRILjBqm/KW+Jcf5Fn6d2U7SJ1uYL9KxujforfphTCl3fbHHczwaDrp3h0TqbQtLxQH3YlBMXRrIcbI72Sg827InxjVUIOoZnZxnOOM+W1MKpUlcvGP1+2kod0IMUDp9ZXJlJSUMqqvl0iyXK8DTP8+wTsQy91Ar/mgvKSi+6YMo4n9MvIyKCb8v5/o44iNwtskZD0QaWKv4xVZ2dH9O2dRqWI8lagDl7PAZQ=
install:
  - npm install
services:
  - mysql
before_install:
  - mysql -e 'CREATE DATABASE IF NOT EXISTS cherrytwist;'
before_script:
  - echo "USE mysql;ALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password
    BY 'toor';;\nFLUSH PRIVILEGES;\n" | mysql -u root
script: .scripts/run-tests.sh
