language: node_js
node_js:
- v12.18.3
cache:
  directories:
  - node_modules
env:
  matrix:
  - DATABASE_HOST=localhost MYSQL_DATABASE=cherrytwist MYSQL_ROOT_PASSWORD=toor AUTH_ENABLED=true
    AUTH_AAD_UPN_DOMAIN=devcherrytwist.onmicrosoft.com AUTH_AAD_CLIENT_APP_ID=6f4fcdb2-5792-4e17-bbdc-14ac0cf78496
    AUTH_AAD_CHERRYTWIST_API_SCOPE=api://869e0dc2-907e-45fe-841f-34cc93beee63/.default
    AUTH_AAD_TENANT=22e3aada-5a09-4e2b-9e0e-dc4f02328b29 AUTH_AAD_CHERRYTWIST_API_APP_ID=869e0dc2-907e-45fe-841f-34cc93beee63
    AUTH_AAD_MSGRAPH_API_SCOPE="Directory.AccessAsUser.All Directory.ReadWrite.All
    User.ReadWrite.All"
  global:
  - secure: h2qdVyPkAhEx2xUTSeKhUJSCa6Dfg3s9dfkdR2lZe80tw1F2cBryqy2cyTuZK+K53NzDuNtTx6lt+H7d4KOvMnqtUpTKfTVW6R7PU8VAlk0/2G3uu8wpTd/Cbq36w6OBXkEgoA7nbVhVKzIDLC9tH3BNhhnV5YT3ZOjRTYkdwxk9LsFIwzTvLB5Ap0Mt383jsd0GSbJVje0IulAuoJuE0fI9oLAH8RunosjhnJ/of9kLVUo9tioYrf3hGtpFdW1PNdXU8ZTIjfeKU3euZQCi+1MRPD7GoW1VJap1ARENsybgwrEdZ4s8ABgkaO9bgoiiLvDYMsFw03jKqym5rpHFPCNrg3PsL8mOmPiPKs015542Ef7gFu2hfjDKtDBSEpRZIiuDnIADgXzah6HlmIvp6nOhBIoLILdnwd9X6lUBUEiWOzpz9n0GabeE7kgj8H5paaArfSK/cip/EtO+o6KjOEMM0l6Aks+3S7oD86u+lRg0dncuy7tk15VjkDg0gJmA25CBnlbBAMFqMXmzkqo6npP4ufX2mwJvuYFyc8ZoI7D1s5VkdWYvO/TbONLL9LxN07qGsz+vP3ZOKCAEa7R2Mtg6QTdpMm5u3mza5FmDD58bAFAlUfwKrp5bG3fXyHQMTdeRVSPjktGe/jAyn87ANEJ5X89jjnCjTDsvtbrc73E=
  - secure: jcyqz/ANKRTNOYxXHDXSM5S+s/2SQgy0UO9+mXhw5yHXg+8Pi+wCfJ1DhObtFvi41J7SJi0GD07wIgoh/V5QDfHnu2Lh2wmJVnL4AAZ+8cYEqxZ9DdjyPVRhYuqZaCcjiPURU7JGd0JPIgBSmQq3DWAYUvGwcZ+Z57Suiyh5FKuz4UNPlaOmNep4znEbieqRpOXuTQdGswSQALz44wdUulVvB+xBjAtzRI7PyV8agXeUGl7UI/BIxQGfLiMs7qBXvJm1T9eZTISaBNHhf7lguh6sSJ8KQTZxolzjHVe6c/cCL4USNRawxQ9SBCQvCJAjebuOMV+30z/1sNjjW7IAUQH5HS8rPC2xRt8qOp5fpKiJS+m92Ly0g4Qj5xKB3nFV/THvZxwtS6FdxBaQk5EghjZFeabEU1wKGds+fICZ7Gl9eog72/6YKgQ9QYCBq/H3+1OSWJlxwRoxWO59cNz3WPDHbHxrHTbB9mjmSpQTvB5DkjNEX7Llt1RDdOl1TU+c1xF4pto6WFSooUD+cLw/dMACwugcjn0K8JCtymgzO9ZPzLyRvNYK1TF97NwN6LNGkPAfhfcKGec9gdYzWi5FPV4f0DA3Ej7RWesfuk73EU73jt29BicCxsnxra+8+40Py3k0Q4OUZHj2du27swGC9+sBybJI2Lqr+MrE9VWx7ws=
install:
- npm install
services:
- mysql
before_install:
- mysql -e 'CREATE DATABASE IF NOT EXISTS cherrytwist;'
before_script:
- echo "USE mysql;ALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password
  BY 'toor';;\nFLUSH PRIVILEGES;\n" | mysql -u root
script:
- npm run-script test:e2e
