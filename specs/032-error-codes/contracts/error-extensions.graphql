# GraphQL Error Extensions Contract
# Feature: 032-error-codes
# Date: 2026-01-22
#
# NOTE: This is documentation only. GraphQL error extensions are untyped
# and not part of the schema. This file documents the expected structure.

"""
Error extensions structure returned in GraphQL error responses.
These are added to the `extensions` field of GraphQL errors.

IMPORTANT: The `extensions` object is NOT part of the GraphQL schema.
This documentation describes the runtime structure for API consumers.
"""

# Example error response structure (JSON):
#
# {
#   "errors": [{
#     "message": "Entity not found",
#     "locations": [{"line": 2, "column": 3}],
#     "path": ["space"],
#     "extensions": {
#       "code": "ENTITY_NOT_FOUND",
#       "numericCode": 10101,
#       "errorId": "550e8400-e29b-41d4-a716-446655440000",
#       "details": {
#         "entityId": "abc-123",
#         "entityType": "Space"
#       }
#     }
#   }]
# }

# Extension Fields:
#
# code: String!
#   - The existing string-based error code from AlkemioErrorStatus enum
#   - Example: "ENTITY_NOT_FOUND", "FORBIDDEN_POLICY", "BAD_USER_INPUT"
#   - UNCHANGED from current behavior
#
# numericCode: Int!            # NEW
#   - 5-digit numeric error code (10000-99999)
#   - First digit indicates category:
#     - 1xxxx = Not Found
#     - 2xxxx = Authorization
#     - 3xxxx = Validation
#     - 4xxxx = Operations
#     - 5xxxx = System/Infrastructure
#     - 9xxxx = Fallback/Unmapped
#   - Example: 10101, 20104, 30101, 99999
#
# errorId: String!
#   - Unique UUID for this specific error occurrence
#   - Used for tracking and support reference
#   - UNCHANGED from current behavior
#
# details: Object
#   - Optional structured data about the error
#   - Contents vary by error type
#   - Only included in development mode (stripped in production)
#   - UNCHANGED from current behavior

# Numeric Code Categories:
#
# 1xxxx - NOT_FOUND (10 codes)
#   10101 ENTITY_NOT_FOUND
#   10102 NOT_FOUND
#   10103 ACCOUNT_NOT_FOUND
#   10104 STORAGE_BUCKET_NOT_FOUND
#   10105 TAGSET_NOT_FOUND
#   10106 MIME_TYPE_NOT_FOUND
#   10107 LICENSE_NOT_FOUND
#   10108 PAGINATION_NOT_FOUND
#   10109 PAGINATION_PARAM_NOT_FOUND
#   10110 URL_RESOLVER_ERROR
#
# 2xxxx - AUTHORIZATION (15 codes)
#   20101 UNAUTHENTICATED
#   20102 UNAUTHORIZED
#   20103 FORBIDDEN
#   20104 FORBIDDEN_POLICY
#   20105 FORBIDDEN_LICENSE_POLICY
#   20106 AUTHORIZATION_INVALID_POLICY
#   20107 AUTHORIZATION_RESET
#   20108 API_RESTRICTED_ACCESS
#   20109 SUBSCRIPTION_USER_NOT_AUTHENTICATED
#   20110 USER_NOT_VERIFIED
#   20111 USER_NOT_REGISTERED
#   20112 USER_ALREADY_REGISTERED
#   20113 MATRIX_ENTITY_NOT_FOUND_ERROR
#   20114 LICENSE_ENTITLEMENT_NOT_AVAILABLE
#   20115 LICENSE_ENTITLEMENT_NOT_SUPPORTED
#
# 3xxxx - VALIDATION (14 codes)
#   30101 BAD_USER_INPUT
#   30102 INPUT_VALIDATION_ERROR
#   30103 INVALID_STATE_TRANSITION
#   30104 INVALID_TOKEN
#   30105 INVALID_UUID
#   30106 INVALID_TEMPLATE_TYPE
#   30107 FORMAT_NOT_SUPPORTED
#   30108 ENTITY_NOT_INITIALIZED
#   30109 GROUP_NOT_INITIALIZED
#   30110 RELATION_NOT_LOADED
#   30111 PAGINATION_INPUT_OUT_OF_BOUND
#   30112 FORUM_DISCUSSION_CATEGORY
#   30113 NO_AGENT_FOR_USER
#   30114 NOT_SUPPORTED
#
# 4xxxx - OPERATIONS (12 codes)
#   40101 OPERATION_NOT_ALLOWED
#   40102 CALLOUT_CLOSED
#   40103 ROLE_SET_POLICY_ROLE_LIMITS_VIOLATED
#   40104 ROLE_SET_ROLE
#   40105 ROLE_SET_INVITATION
#   40106 NOT_ENABLED
#   40107 MESSAGING_NOT_ENABLED
#   40108 LOGIN_FLOW_INIT
#   40109 LOGIN_FLOW
#   40110 SESSION_EXTEND
#   40111 SESSION_EXPIRED
#   40112 BEARER_TOKEN
#
# 5xxxx - SYSTEM (19 codes)
#   50101 BOOTSTRAP_FAILED
#   50102 NOTIFICATION_PAYLOAD_BUILDER_ERROR
#   50103 GEO_LOCATION_ERROR
#   50104 GEO_SERVICE_NOT_AVAILABLE
#   50105 GEO_SERVICE_ERROR
#   50106 GEO_SERVICE_REQUEST_LIMIT_EXCEEDED
#   50107 USER_IDENTITY_NOT_FOUND
#   50108 USER_IDENTITY_DELETION_FAILED
#   50109 STORAGE_DISABLED
#   50110 STORAGE_UPLOAD_FAILED
#   50111 LOCAL_STORAGE_SAVE_FAILED
#   50112 LOCAL_STORAGE_READ_FAILED
#   50113 LOCAL_STORAGE_DELETE_FAILED
#   50114 DOCUMENT_SAVE_FAILED
#   50115 DOCUMENT_READ_FAILED
#   50116 DOCUMENT_DELETE_FAILED
#   50117 EXCALIDRAW_AMQP_RESULT_ERROR
#   50118 EXCALIDRAW_REDIS_ADAPTER_INIT
#   50119 EXCALIDRAW_SERVER_INIT
#
# 9xxxx - FALLBACK (1 code)
#   99999 UNSPECIFIED (used for unmapped errors)
